<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
    <meta charset="utf-8" />
    <style>
        canvas {
            display: block;
            border: whitesmoke 2px solid;
        }
        main {
            display: flex;
            flex-direction: row;
            column-gap: 10px;
        }
        input[type="range"] {
            
  -webkit-appearance: none;
  appearance: none;
  background: var(--my-variable);
  width:150px;
  height: 2px;
  border-radius: 10px;
  transition: .4s;
}
    </style>
  </head>
  <body>
    <br>
    <br>
    <main>
        <div>
            Leave Me A Picture! <br><br>
            <div id="picker2"></div>
            <input type="range" id="weight" min="1" max="50" value="1"/>
            <button id="clear-button" class="button">clear</button>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
    <script>
        let colorPicker2 = new iro.ColorPicker("#picker2", {
    
            width: 150,
  color: "rgb(255, 0, 0)",
  borderWidth: 1,
  borderColor: "#fff",
  layout: [
    {
      component: iro.ui.Slider,
      options: {
        sliderType: 'hue'
      }
    },
    {
      component: iro.ui.Slider,
      options: {
        sliderType: 'value'
      }
    },
  ]
});

        let canvas;
        let drawings = [];
        let currentPath = [];
        let isDrawing = false;
        let colorInput = document.getElementById('picker2');
        let weight = document.getElementById('weight');
        let parentWidth = $("main").width();
        console.log(parentWidth)
        
        function setup() {
          canvas = createCanvas(parentWidth-180, ((parentWidth*1080)/2100));
          canvas.mousePressed(startPath);
          canvas.mouseReleased(function() {
            endPath();
          });

            button2 = select("#clear-button");
            button2.mousePressed(clearPad);
        }
        
        function startPath() {
          px = mouseX;
          py = mouseY;
        
          console.log("——");
          console.log("You started a new path!");
          isDrawing = true;
          currentPath = [];
          drawings.push(currentPath);
          console.log("A new array of points is pushed in 'drawing'");
          console.log(currentPath);
        
        }
        
        function endPath() {
          console.log("You released the pen, and ended this path!");
          console.log("There is " + drawings.length + " paths in 'drawing' now.");
          console.log("Let see the content of the drawing array:");
          console.log(drawings);
          isDrawing = false;
          console.log("You're not drawing right now");
        }
        
        function draw() {
          if (isDrawing) {
            let point = {
              x1: px,
              y1: py,
              x2: mouseX,
              y2: mouseY,
              color: colorPicker2.color.hexString,
              size: weight.value,
            }
            currentPath.push(point);
            px = mouseX;
            py = mouseY;
          }
        
          //Shows the current drawing if there any data in drawing array
          for (let i = 0; i < drawings.length; i++) {
            let path = drawings[i];
            if (drawings[i].length != 0) {
              // beginShape();
              for (let j = 0; j < path.length; j++) {
                strokeWeight(path[j].size);
                stroke(path[j].color);
                line(path[j].x1, path[j].y1, path[j].x2, path[j].y2);
                // vertex(path[j].x2, path[j].y2);
              }
              // endShape();
            }
          }
        }
        function windowResized() {
            parentWidth = $("main").width();

            resizeCanvas(parentWidth-180, ((parentWidth*1080)/2100));
            console.log("window resized!")
        }

        function clearPad(){
            drawings.splice(0);
            console.log("test");
        }
        </script>
  </body>
</html>
